!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms")):"function"==typeof define&&define.amd?define("ngx-number-format",["exports","@angular/core","@angular/forms"],t):t((e=e||self)["ngx-number-format"]={},e.ng.core,e.ng.forms)}(this,function(e,t,n){"use strict";var i=function(){function e(e){this.el=e,this._oldValueForDetectChange=null,this._oldValue=null,this._displayValue=null,this._max=0,this._decimal=0,this._format=!1,this._specialKeys=["Backspace","Tab","End","Home","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter","Delete"],this._regExNumber=new RegExp(/^[0-9]*$/g),this._regExNumberAndDecimal=new RegExp(/^[0-9]+(\.[0-9]*){0,1}$/g),this._oldSelectionStart=0,this._detectDelete=!1,this._detectBackspace=!1,this._detectSelectAll=!1,this._process=!1,this.onChange=function(e){},this.onTouch=function(){}}return e.prototype.ngOnInit=function(){this._formElement=this.el.nativeElement},Object.defineProperty(e.prototype,"initialize",{set:function(e){this.setFormat(e)},enumerable:!0,configurable:!0}),e.prototype.onKeyDown=function(e){if(this._process){if("Backspace"==e.key){this._detectBackspace=!0;var t=this._formElement.value.substring(this._formElement.selectionStart-1,this._formElement.selectionStart);this._formElement.selectionStart==this._formElement.selectionEnd&&","==t&&(this.setCursorAt(this._formElement.selectionStart-1),e.preventDefault())}else this._detectBackspace=!1;if("Delete"==e.key){this._detectDelete=!0;t=this._formElement.value.substring(this._formElement.selectionEnd,this._formElement.selectionEnd+1);this._formElement.selectionStart==this._formElement.selectionEnd&&","==t&&(this.setCursorAt(this._formElement.selectionEnd+1),e.preventDefault())}else this._detectDelete=!1;if(-1!==this._specialKeys.indexOf(e.key)||65===e.keyCode&&(e.ctrlKey||e.metaKey)||67===e.keyCode&&(e.ctrlKey||e.metaKey)||86===e.keyCode&&(e.ctrlKey||e.metaKey)||88===e.keyCode&&(e.ctrlKey||e.metaKey))return;var n=this.el.nativeElement.value,i=n.substring(0,this._formElement.selectionStart),o=n.substring(this._formElement.selectionEnd),r=(i.concat(e.key)+o).replace(/,/g,""),s=this.getRegEx(),l=r.split(".");r&&!String(r).match(s)||l[0].length>this._max&&this._formElement.selectionStart==this._formElement.selectionEnd||this._decimal>0&&2==l.length&&l[1].length>this._decimal&&this._formElement.selectionStart==this._formElement.selectionEnd?e.preventDefault():(this._oldSelectionStart=this._formElement.selectionStart,this._oldValue=this._formElement.value)}},e.prototype.onClick=function(e){this._oldSelectionStart=this._formElement.selectionStart,this._oldValue=this._formElement.value,this._oldValueForDetectChange=e.target.value},e.prototype.onInput=function(e){var t=e.target.value;this._process&&(t&&!String(t).replace(/,/g,"").match(this.getRegEx())?this._formElement.value="":((this._detectBackspace||this._detectDelete)&&(this._oldSelectionStart=this._formElement.selectionStart-1,this._oldValue=this._formElement.value),this.onValueChange(t)))},e.prototype.onBlur=function(e){var t=e.target.value;if(t.length>0&&this._decimal>0&&(t=t.replace(/,/g,""),t=Number(t).toFixed(this._decimal).toString(),this._formElement.value=t.replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.onTouch(),/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&t!=this._oldValueForDetectChange){var n=document.createEvent("HTMLEvents");n.initEvent("change",!1,!0),e.target.dispatchEvent(n)}},e.prototype.processCursorPosition=function(e,t,n){var i=0,o=0;n&&(i=((e=e.substr(0,t)).match(/,/g)||[]).length,o=((n=n.substr(0,t+1)).match(/,/g)||[]).length,this.setCursorAt(t+1+(o-i)))},e.prototype.setCursorAt=function(e){this._formElement.setSelectionRange&&(this._formElement.focus(),this._formElement.setSelectionRange(e,e))},e.prototype.writeValue=function(e){null!=e&&""!=e&&(e="string"==typeof e?e.replace(/,/g,""):e.toString()),this.onValueChange(e,!1)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouch=e},e.prototype.setDisabledState=function(e){this._formElement.disabled=e},e.prototype.onValueChange=function(e,t){if(void 0===t&&(t=!0),e!==this._displayValue&&this._process){var n=void 0;null==e||""===e.trim()?n="":(n=e.replace(/,/g,""),n=this.removeLeadingZero(n)),this._format?this._displayValue=n.replace(/\B(?=(\d{3})+(?!\d))/g,","):this._displayValue=n,this._formElement.value=this._displayValue,this.onChange(n),t&&this.processCursorPosition(this._oldValue,this._oldSelectionStart,this._displayValue)}},e.prototype.removeLeadingZero=function(e){-1==e.indexOf(".")&&(e=(+e).toString());return e},e.prototype.getRegEx=function(){return this._decimal>0?this._regExNumberAndDecimal:this._regExNumber},e.prototype.setFormat=function(e){this._process=!!e,-1!==e.indexOf(",")?this._format=!0:this._format=!1;var t=(e=e.replace(/,/g,"")).split(".");1==t.length?this._max=t[0].length:2==t.length&&(this._max=t[0].length,this._decimal=t[1].length)},e.decorators=[{type:t.Directive,args:[{selector:"[ngxNumberFormat]",providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return e}),multi:!0}]}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={initialize:[{type:t.Input,args:["ngxNumberFormat"]}],onKeyDown:[{type:t.HostListener,args:["keydown",["$event"]]}],onClick:[{type:t.HostListener,args:["click",["$event"]]}],onInput:[{type:t.HostListener,args:["input",["$event"]]}],onBlur:[{type:t.HostListener,args:["blur",["$event"]]}]},e}(),o=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[i],exports:[i]}]}],e}();e.NgxNumberFormatModule=o,e.Éµa=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-number-format.umd.min.js.map