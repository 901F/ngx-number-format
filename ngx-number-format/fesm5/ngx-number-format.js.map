{"version":3,"file":"ngx-number-format.js","sources":["ng://ngx-number-format/lib/ngx-number-format.directive.ts","ng://ngx-number-format/lib/ngx-number-format.module.ts"],"sourcesContent":["import { Directive, forwardRef, OnInit, ElementRef, Input, HostListener } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\n@Directive({\n    selector: '[ngxNumberFormat]',\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => NgxNumberFormatDirective),\n            multi: true\n        }\n    ]\n})\nexport class NgxNumberFormatDirective implements ControlValueAccessor, OnInit {\n\n    private _oldValueForDetectChange: string = null;\n    private _oldValue: string = null;\n    private _displayValue: string = null;\n    private _max: number = 0;\n    private _decimal: number = 0;\n    private _format: boolean = false;\n    private _formElement: HTMLInputElement;\n    private _specialKeys: Array<string> = ['Backspace', 'Tab', 'End', 'Home', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Enter', 'Delete'];\n    private _regExNumber: RegExp = new RegExp(/^[0-9]*$/g);\n    private _regExNumberAndDecimal: RegExp = new RegExp(/^[0-9]+(\\.[0-9]*){0,1}$/g);\n    private _oldSelectionStart: number = 0;\n    private _detectDelete: boolean = false;\n    private _detectBackspace: boolean = false;\n    private _detectSelectAll: boolean = false;\n    private _process: boolean = false;\n\n    public onChange = (_: any) => { };\n    public onTouch = () => { };\n\n    constructor(private el: ElementRef) { }\n\n    ngOnInit() {\n        this._formElement = this.el.nativeElement;\n    }\n\n    @Input('ngxNumberFormat')\n    public set initialize(_value: string) {\n        this.setFormat(_value);\n    }\n\n    @HostListener('keydown', ['$event'])\n    onKeyDown(event: KeyboardEvent) {\n\n        if (this._process) {\n            if (event.key == 'Backspace') {\n                this._detectBackspace = true;\n                let last: string = this._formElement.value.substring(this._formElement.selectionStart - 1, this._formElement.selectionStart);\n                if (this._formElement.selectionStart == this._formElement.selectionEnd && last == ',') {\n                    this.setCursorAt(this._formElement.selectionStart - 1);\n                    event.preventDefault();\n                }\n            } else {\n                this._detectBackspace = false;\n            }\n    \n            if (event.key == 'Delete') {\n                this._detectDelete = true;\n                let last: string = this._formElement.value.substring(this._formElement.selectionEnd, this._formElement.selectionEnd + 1);\n                if (this._formElement.selectionStart == this._formElement.selectionEnd && last == ',') {\n                    this.setCursorAt(this._formElement.selectionEnd + 1);\n                    event.preventDefault();\n                }\n            } else {\n                this._detectDelete = false;\n            }\n    \n            if (\n                this._specialKeys.indexOf(event.key) !== -1\n                || (event.keyCode === 65 && (event.ctrlKey || event.metaKey)) // Allow: Ctrl + A\n                || (event.keyCode === 67 && (event.ctrlKey || event.metaKey)) // Allow: Ctrl + C\n                || (event.keyCode === 86 && (event.ctrlKey || event.metaKey)) // Allow: Ctrl + V\n                || (event.keyCode === 88 && (event.ctrlKey || event.metaKey)) // Allow: Ctrl + X\n            ) {\n                return;\n            }\n    \n            let current: string = this.el.nativeElement.value;\n            let firstPart: string = current.substring(0, this._formElement.selectionStart);\n            let secondPart: string = current.substring(this._formElement.selectionEnd);\n            let next: string = (firstPart.concat(event.key) + secondPart).replace(/,/g, '');\n    \n            let regEx = this.getRegEx();\n    \n            let value = next.split('.');\n            if (next && !String(next).match(regEx) || (value[0].length > this._max && this._formElement.selectionStart == this._formElement.selectionEnd) || (this._decimal > 0 && value.length == 2 && (value[1].length > this._decimal && this._formElement.selectionStart == this._formElement.selectionEnd))) {\n                event.preventDefault();\n            } else {\n                this._oldSelectionStart = this._formElement.selectionStart;\n                this._oldValue = this._formElement.value;\n            }\n        }\n\n    }\n\n    @HostListener('click', ['$event'])\n    public onClick(event): void {\n        this._oldSelectionStart = this._formElement.selectionStart;\n        this._oldValue = this._formElement.value;\n        this._oldValueForDetectChange = event.target.value;\n    }\n\n    @HostListener('input', ['$event'])\n    public onInput(event): void {\n        let value = event.target.value;\n\n        if (this._process) {\n            if (value && !String(value).replace(/,/g, '').match(this.getRegEx())) {\n                this._formElement.value = '';\n            } else {\n                if (this._detectBackspace || this._detectDelete) {\n                    this._oldSelectionStart = this._formElement.selectionStart - 1;\n                    this._oldValue = this._formElement.value;\n                }\n                this.onValueChange(value);\n            }\n        }\n\n    }\n\n    @HostListener('blur', ['$event'])\n    public onBlur(event): void {\n        let value = event.target.value;\n\n        if (value.length > 0 && this._decimal > 0) {\n            value = value.replace(/,/g, '');\n            value = Number(value).toFixed(this._decimal).toString();\n            this._formElement.value = value.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n        this.onTouch();\n\n        // Fix bug on Internet Explorer and Microsoft Edge not fire change event when set value to input element by javascript.\n        let isIEOrEdge = /msie\\s|trident\\/|edge\\//i.test(window.navigator.userAgent);\n        if (isIEOrEdge && (value != this._oldValueForDetectChange)) {\n            var evt = document.createEvent(\"HTMLEvents\");\n            evt.initEvent(\"change\", false, true);\n            event.target.dispatchEvent(evt);\n        }\n    }\n\n    processCursorPosition(_oldValue: string, _oldSelectionStart: number, _newValue: string) {\n        let _oldTotalComma = 0;\n        let _newTotalComma = 0;\n        if (_newValue) {\n            _oldValue = _oldValue.substr(0, _oldSelectionStart);\n            _oldTotalComma = (_oldValue.match(/,/g) || []).length;\n            _newValue = _newValue.substr(0, _oldSelectionStart + 1);\n            _newTotalComma = (_newValue.match(/,/g) || []).length;\n            this.setCursorAt(_oldSelectionStart + 1 + (_newTotalComma - _oldTotalComma));\n        }\n    }\n\n    setCursorAt(position: number): void {\n        if (this._formElement.setSelectionRange) {\n            this._formElement.focus();\n            this._formElement.setSelectionRange(position, position);\n        }\n    }\n\n    writeValue(value: any): void {\n\n        if (value != null && value != '') {\n            if (typeof (value) === 'string') {\n                value = value.replace(/,/g, '');\n            } else {\n                value = value.toString();\n            }\n        }\n\n        this.onValueChange(value, false);\n    }\n\n    registerOnChange(fn: any): void {\n        this.onChange = fn;\n    }\n\n    registerOnTouched(fn: any): void {\n        this.onTouch = fn;\n    }\n\n    setDisabledState?(value: boolean): void {\n        this._formElement.disabled = value;\n    }\n\n    private onValueChange(newValue: string, cursor: boolean = true) {\n\n        if (newValue !== this._displayValue && this._process) {\n            let value;\n\n            if ((newValue == null) || (newValue.trim() === '')) {\n                value = '';\n            } else {\n                value = newValue.replace(/,/g, '');\n                value = this.removeLeadingZero(value);\n            }\n\n\n            if (this._format) {\n                this._displayValue = value.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n            } else {\n                this._displayValue = value;\n            }\n\n\n\n            this._formElement.value = this._displayValue;\n            this.onChange(value);\n            if (cursor) {\n                this.processCursorPosition(this._oldValue, this._oldSelectionStart, this._displayValue);\n            }\n        }\n    }\n\n    private removeLeadingZero(value: string): string {\n        if (value.indexOf('.') == -1) {\n            let convertVal = +value;\n            value = convertVal.toString();\n        }\n        return value;\n    }\n\n    private getRegEx(): RegExp {\n        return (this._decimal > 0) ? this._regExNumberAndDecimal : this._regExNumber;\n    }\n\n    private setFormat(_value: string) {\n\n        if (_value) {\n            this._process = true;\n        } else {\n            this._process = false;\n        }\n\n        if (_value.indexOf(',') !== -1) {\n            this._format = true;\n        } else {\n            this._format = false;\n        }\n        _value = _value.replace(/,/g, '');\n        let data = _value.split('.');\n\n        if (data.length == 1) {\n            this._max = data[0].length;\n        } else if (data.length == 2) {\n            this._max = data[0].length;\n            this._decimal = data[1].length;\n        }\n\n    }\n}","import { NgModule } from '@angular/core';\nimport { NgxNumberFormatDirective } from './ngx-number-format.directive';\n\n\n\n@NgModule({\n  declarations: [NgxNumberFormatDirective],\n  exports: [NgxNumberFormatDirective]\n})\nexport class NgxNumberFormatModule { }\n"],"names":[],"mappings":";;;;;;;AAAA;IAkCI,kCAAoB,EAAc;QAAd,OAAE,GAAF,EAAE,CAAY;QAnB1B,6BAAwB,GAAW,IAAI,CAAC;QACxC,cAAS,GAAW,IAAI,CAAC;QACzB,kBAAa,GAAW,IAAI,CAAC;QAC7B,SAAI,GAAW,CAAC,CAAC;QACjB,aAAQ,GAAW,CAAC,CAAC;QACrB,YAAO,GAAY,KAAK,CAAC;QAEzB,iBAAY,GAAkB,CAAC,WAAW,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,WAAW,EAAE,WAAW,EAAE,YAAY,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;QACxI,iBAAY,GAAW,IAAI,MAAM,CAAC,WAAW,CAAC,CAAC;QAC/C,2BAAsB,GAAW,IAAI,MAAM,CAAC,0BAA0B,CAAC,CAAC;QACxE,uBAAkB,GAAW,CAAC,CAAC;QAC/B,kBAAa,GAAY,KAAK,CAAC;QAC/B,qBAAgB,GAAY,KAAK,CAAC;QAClC,qBAAgB,GAAY,KAAK,CAAC;QAClC,aAAQ,GAAY,KAAK,CAAC;QAE3B,aAAQ;;;;QAAG,UAAC,CAAM,KAAQ,EAAC;QAC3B,YAAO;;;QAAG,eAAS,EAAC;KAEY;;;;IAEvC,2CAAQ;;;IAAR;QACI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC;KAC7C;IAED,sBACW,gDAAU;;;;;QADrB,UACsB,MAAc;YAChC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;SAC1B;;;OAAA;;;;;IAGD,4CAAS;;;;IADT,UACU,KAAoB;QAE1B,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,KAAK,CAAC,GAAG,IAAI,WAAW,EAAE;gBAC1B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;;oBACzB,IAAI,GAAW,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,cAAc,GAAG,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC;gBAC5H,IAAI,IAAI,CAAC,YAAY,CAAC,cAAc,IAAI,IAAI,CAAC,YAAY,CAAC,YAAY,IAAI,IAAI,IAAI,GAAG,EAAE;oBACnF,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC;oBACvD,KAAK,CAAC,cAAc,EAAE,CAAC;iBAC1B;aACJ;iBAAM;gBACH,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;aACjC;YAED,IAAI,KAAK,CAAC,GAAG,IAAI,QAAQ,EAAE;gBACvB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;;oBACtB,IAAI,GAAW,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,YAAY,GAAG,CAAC,CAAC;gBACxH,IAAI,IAAI,CAAC,YAAY,CAAC,cAAc,IAAI,IAAI,CAAC,YAAY,CAAC,YAAY,IAAI,IAAI,IAAI,GAAG,EAAE;oBACnF,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;oBACrD,KAAK,CAAC,cAAc,EAAE,CAAC;iBAC1B;aACJ;iBAAM;gBACH,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;aAC9B;YAED,IACI,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;oBACvC,KAAK,CAAC,OAAO,KAAK,EAAE,KAAK,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;oBACzD,KAAK,CAAC,OAAO,KAAK,EAAE,KAAK,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;oBACzD,KAAK,CAAC,OAAO,KAAK,EAAE,KAAK,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;oBACzD,KAAK,CAAC,OAAO,KAAK,EAAE,KAAK,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;cAC/D;gBACE,OAAO;aACV;;gBAEG,OAAO,GAAW,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,KAAK;;gBAC7C,SAAS,GAAW,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC;;gBAC1E,UAAU,GAAW,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC;;gBACtE,IAAI,GAAW,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,UAAU,EAAE,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC;;gBAE3E,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE;;gBAEvB,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;YAC3B,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC,cAAc,IAAI,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,KAAK,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,YAAY,CAAC,cAAc,IAAI,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,EAAE;gBAClS,KAAK,CAAC,cAAc,EAAE,CAAC;aAC1B;iBAAM;gBACH,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC;gBAC3D,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;aAC5C;SACJ;KAEJ;;;;;IAGM,0CAAO;;;;IADd,UACe,KAAK;QAChB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC;QAC3D,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;QACzC,IAAI,CAAC,wBAAwB,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;KACtD;;;;;IAGM,0CAAO;;;;IADd,UACe,KAAK;;YACZ,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK;QAE9B,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE;gBAClE,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,EAAE,CAAC;aAChC;iBAAM;gBACH,IAAI,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,aAAa,EAAE;oBAC7C,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,GAAG,CAAC,CAAC;oBAC/D,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;iBAC5C;gBACD,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;aAC7B;SACJ;KAEJ;;;;;IAGM,yCAAM;;;;IADb,UACc,KAAK;;YACX,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK;QAE9B,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE;YACvC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;YAChC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,CAAC;YACxD,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,uBAAuB,EAAE,GAAG,CAAC,CAAC;SACzE;QACD,IAAI,CAAC,OAAO,EAAE,CAAC;;;YAGX,UAAU,GAAG,0BAA0B,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC;QAC5E,IAAI,UAAU,KAAK,KAAK,IAAI,IAAI,CAAC,wBAAwB,CAAC,EAAE;;gBACpD,GAAG,GAAG,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC;YAC5C,GAAG,CAAC,SAAS,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;YACrC,KAAK,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;SACnC;KACJ;;;;;;;IAED,wDAAqB;;;;;;IAArB,UAAsB,SAAiB,EAAE,kBAA0B,EAAE,SAAiB;;YAC9E,cAAc,GAAG,CAAC;;YAClB,cAAc,GAAG,CAAC;QACtB,IAAI,SAAS,EAAE;YACX,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,kBAAkB,CAAC,CAAC;YACpD,cAAc,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,CAAC;YACtD,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,kBAAkB,GAAG,CAAC,CAAC,CAAC;YACxD,cAAc,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,CAAC;YACtD,IAAI,CAAC,WAAW,CAAC,kBAAkB,GAAG,CAAC,IAAI,cAAc,GAAG,cAAc,CAAC,CAAC,CAAC;SAChF;KACJ;;;;;IAED,8CAAW;;;;IAAX,UAAY,QAAgB;QACxB,IAAI,IAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE;YACrC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;YAC1B,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;SAC3D;KACJ;;;;;IAED,6CAAU;;;;IAAV,UAAW,KAAU;QAEjB,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,EAAE,EAAE;YAC9B,IAAI,QAAQ,KAAK,CAAC,KAAK,QAAQ,EAAE;gBAC7B,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;aACnC;iBAAM;gBACH,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;aAC5B;SACJ;QAED,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;KACpC;;;;;IAED,mDAAgB;;;;IAAhB,UAAiB,EAAO;QACpB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;KACtB;;;;;IAED,oDAAiB;;;;IAAjB,UAAkB,EAAO;QACrB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;KACrB;;;;;IAED,mDAAgB;;;;IAAhB,UAAkB,KAAc;QAC5B,IAAI,CAAC,YAAY,CAAC,QAAQ,GAAG,KAAK,CAAC;KACtC;;;;;;;IAEO,gDAAa;;;;;;IAArB,UAAsB,QAAgB,EAAE,MAAsB;QAAtB,uBAAA,EAAA,aAAsB;QAE1D,IAAI,QAAQ,KAAK,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,QAAQ,EAAE;;gBAC9C,KAAK,SAAA;YAET,IAAI,CAAC,QAAQ,IAAI,IAAI,MAAM,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE;gBAChD,KAAK,GAAG,EAAE,CAAC;aACd;iBAAM;gBACH,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;gBACnC,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;aACzC;YAGD,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC,OAAO,CAAC,uBAAuB,EAAE,GAAG,CAAC,CAAC;aACpE;iBAAM;gBACH,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;aAC9B;YAID,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC;YAC7C,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YACrB,IAAI,MAAM,EAAE;gBACR,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;aAC3F;SACJ;KACJ;;;;;;IAEO,oDAAiB;;;;;IAAzB,UAA0B,KAAa;QACnC,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE;;gBACtB,UAAU,GAAG,CAAC,KAAK;YACvB,KAAK,GAAG,UAAU,CAAC,QAAQ,EAAE,CAAC;SACjC;QACD,OAAO,KAAK,CAAC;KAChB;;;;;IAEO,2CAAQ;;;;IAAhB;QACI,OAAO,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,YAAY,CAAC;KAChF;;;;;;IAEO,4CAAS;;;;;IAAjB,UAAkB,MAAc;QAE5B,IAAI,MAAM,EAAE;YACR,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACxB;aAAM;YACH,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;SACzB;QAED,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;YAC5B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;SACvB;aAAM;YACH,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;SACxB;QACD,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;;YAC9B,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC;QAE5B,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE;YAClB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;SAC9B;aAAM,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE;YACzB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;YAC3B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;SAClC;KAEJ;;gBAzPJ,SAAS,SAAC;oBACP,QAAQ,EAAE,mBAAmB;oBAC7B,SAAS,EAAE;wBACP;4BACI,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,EAAE,UAAU;;;4BAAC,cAAM,OAAA,wBAAwB,GAAA,EAAC;4BACvD,KAAK,EAAE,IAAI;yBACd;qBACJ;iBACJ;;;;gBAZuC,UAAU;;;6BAwC7C,KAAK,SAAC,iBAAiB;4BAKvB,YAAY,SAAC,SAAS,EAAE,CAAC,QAAQ,CAAC;0BAsDlC,YAAY,SAAC,OAAO,EAAE,CAAC,QAAQ,CAAC;0BAOhC,YAAY,SAAC,OAAO,EAAE,CAAC,QAAQ,CAAC;yBAkBhC,YAAY,SAAC,MAAM,EAAE,CAAC,QAAQ,CAAC;;IAiIpC,+BAAC;CA1PD;;;;;;ACHA;IAKA;KAIsC;;gBAJrC,QAAQ,SAAC;oBACR,YAAY,EAAE,CAAC,wBAAwB,CAAC;oBACxC,OAAO,EAAE,CAAC,wBAAwB,CAAC;iBACpC;;IACoC,4BAAC;CAJtC;;;;"}